<!doctype html>
<html lang="fi">
<head>
  <title>AseKauppa ‚Äî Ase & tarvikekauppa</title>
  <meta name="description" content="Camo-henkinen ja tyylik√§s ase- ja tarvikekauppa. Selke√§ navigointi, nopea haku ja sujuva ostokokemus.">
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="robots" content="noarchive">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/css/main.css">
<link rel="stylesheet" href="assets/css/components.css">
<link rel="stylesheet" href="assets/css/pages.css">
<link rel="icon" href="assets/img/ui/favicon.svg" type="image/svg+xml">

</head>
<body class="theme-light" data-page="home">
  <div id="siteHeader"></div>
  <main id="main" class="container" style="padding-top: 18px">
    
<section class="hero">
  <div class="hero-card">
    <div class="hero-bg" id="heroBg"></div>
    <div class="hero-tex" id="heroTex"></div>

    <div class="hero-content">
      <div>
        <span class="pill"><strong>Uutta</strong> ‚Ä¢ camo‚Äëhenkinen premium‚Äëilme</span>
        <h1 class="h1">Aseet & tarvikkeet ‚Äì tyylill√§, vastuullisesti</h1>
        <p class="lead">AseKauppa yhdist√§√§ kivijalkakaupan selkeyden ja huutokauppatalon tehokkuuden: reilut hinnat, nopeat listaukset ja sujuva asiointi.</p>

        <div class="cta">
          <a class="btn primary" href="category.html?c=Aseet">Selaa aseita</a>
          <a class="btn" href="campaigns.html">Katso kampanjat</a>
          <a class="btn ghost" href="sell.html">Myy aseesi meille</a>
        </div>

        <div class="hr"></div>

        <div class="ad">
          <div>
            <strong>Maaliskuun j√§ttikampanja: l√§het√§ aseesi arvioon ja saat +100 ‚Ç¨ extrahyvityksen.</strong>
            <p class="small">Voimassa 31.3. asti. L√§pin√§kyv√§ arvio 24h sis√§ll√§, turvallinen prosessi ja nopeat jatkotoimet.</p>
          </div>
          <div class="actions">
            <a class="btn primary" href="sell.html">Pyyd√§ arvio</a>
            <a class="btn" href="list.html">Ilmoita aseesi myyntiin</a>
          </div>
        </div>
      </div>

      <div class="trust">
        <div class="tile">
          <div class="ico">‚úì</div>
          <div><strong>Nopea toimitus</strong><span>1‚Äì3 arkip√§iv√§√§, seuranta & ilmoitukset.</span></div>
        </div>
        <div class="tile">
          <div class="ico">‚òÖ</div>
          <div><strong>Valikoima</strong><span>Aseet, optiikka, varusteet, lataus & huolto.</span></div>
        </div>
        <div class="tile">
          <div class="ico">üõ°</div>
          <div><strong>Vastuullisuus</strong><span>Luvat ja k√§yt√§nn√∂t huomioiden.</span></div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="section-head">
    <div>
      <h2 class="h2">Kategoriat</h2>
      <p class="p">Kaikki t√§rkeimm√§t osastot, selke√§ navigointi, nopea haku.</p>
    </div>
    <a class="btn small" href="campaigns.html">N√§yt√§ tarjoukset</a>
  </div>

  <div class="grid cols-3 cat-grid" id="catGrid"></div>
</section>

<section class="section">
  <div class="section-head">
    <div>
      <h2 class="h2">Suositut tuotteet</h2>
      <p class="p">Dynaaminen listaus tuotteista (data/products.json).</p>
    </div>
    <a class="btn small" href="search.html?q=uutuus">Hae ‚Äúuutuus‚Äù</a>
  </div>

  <div class="grid cols-4" id="featuredGrid"></div>
</section>

<section class="section">
  <div class="section-head">
    <div>
      <h2 class="h2">Kampanjat & nostoja</h2>
      <p class="p">Nostoja, ajankohtaista ja yhteisty√∂t√§ ‚Äì kuten hyv√§ss√§ kaupassa.</p>
    </div>
  </div>

  <div class="grid cols-2">
    <div class="card">
      <div class="pad">
        <span class="pill"><strong>Ilmoitus</strong> ‚Ä¢ Consignment</span>
        <h3 class="h3" style="margin-top:10px">Ilmoita aseesi myyntiin!</h3>
        <p class="p" style="margin-top:6px">Me hoidamme n√§kyvyyden, kyselyt ja v√§lityksen ‚Äî sin√§ p√§√§t√§t minimihinnan.</p>
        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn primary" href="list.html">J√§t√§ ilmoitus</a>
          <a class="btn" href="faq.html">Miten toimii?</a>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="pad">
        <span class="pill"><strong>Turva</strong> ‚Ä¢ Reilu peli</span>
        <h3 class="h3" style="margin-top:10px">Tarkistettu k√§ytetty ‚Äì ‚ÄúK√§ytetty, mutta kunnossa‚Äù</h3>
        <p class="p" style="margin-top:6px">Esimerkkiprosessi: kuntotarkastus, kuvaus, varastonhallinta ja toimitus.</p>
        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn" href="category.html?c=Aseet&badge=K√§ytetty">Selaa k√§ytettyj√§</a>
          <a class="btn primary" href="campaigns.html">Katso paketit</a>
        </div>
      </div>
    </div>
  </div>
</section>

  </main>
<div id="campaignPopup" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="campaignTitle">
  <div class="modal-backdrop" data-close="campaign"></div>
  <div class="modal-panel">
    <button type="button" class="modal-close" id="campaignClose" aria-label="Sulje kampanja">√ó</button>
    <span class="pill"><strong>Maaliskuun kampanja</strong> ‚Ä¢ +100 ‚Ç¨ extrahyvitys</span>
    <h2 class="h2" id="campaignTitle" style="margin-top:12px">L√§het√§ aseesi arvioitavaksi nyt</h2>
    <p class="p" style="margin-top:8px">Hyv√§ksytyss√§ kaupassa +100 ‚Ç¨ extrahyvitys 31.3. asti. Arvio yleens√§ 24h sis√§ll√§. Luvat ja luovutukset aina lain mukaan.</p>
    <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
      <a class="btn primary" href="sell.html">L√§het√§ arvioon</a>
      <button type="button" class="btn" id="campaignLater">Muistuta my√∂hemmin</button>
    </div>
  </div>
</div>

<div id="cookiePopup" class="cookie-banner hidden" role="dialog" aria-live="polite" aria-label="Ev√§steilmoitus">
  <div>
    <strong>Hyv√§ksy ev√§steet</strong>
    <p class="small" style="margin-top:6px">K√§yt√§mme v√§ltt√§m√§tt√∂mi√§ ev√§steit√§ toiminnallisuuksiin ja analytiikkaa palvelun kehitt√§miseen.</p>
  </div>
  <div class="actions">
    <button type="button" class="btn primary" id="cookieAccept">Hyv√§ksy ev√§steet</button>
  </div>
</div>

<script type="module">
  import {
    getPopupSettings,
    readSafeStorage,
    writeSafeStorage,
    shouldShowCampaignPopup,
    isCookieConsentAccepted
  } from './popup-state.js';

  // Less noise. More signal. AnomFIN.
  const settings = getPopupSettings();
  let storage = null;
  try {
    storage = window.localStorage;
  } catch (e) {
    storage = null;
  }
  const now = new Date();

  const campaignPopup = document.getElementById('campaignPopup');
  const campaignClose = document.getElementById('campaignClose');
  const campaignLater = document.getElementById('campaignLater');
  const campaignBackdrop = campaignPopup?.querySelector('[data-close="campaign"]');
  const campaignTitle = document.getElementById('campaignTitle');
  const campaignDescription = campaignPopup?.querySelector('.p');

  const cookiePopup = document.getElementById('cookiePopup');
  const cookieAccept = document.getElementById('cookieAccept');
  const cookieMessage = cookiePopup?.querySelector('.small');

  async function loadAdminSettings() {
    try {
      const response = await fetch('./data/admin-settings.json', { cache: 'no-store' });
      if (!response.ok) {
        return null;
      }
      const data = await response.json();
      return data && typeof data === 'object' ? data : null;
    } catch {
      return null;
    }
  }

  function applyDynamicContent(adminSettings) {
    if (!adminSettings || typeof adminSettings !== 'object') {
      return;
    }

    if (campaignTitle && typeof adminSettings.campaign?.title === 'string') {
      campaignTitle.textContent = adminSettings.campaign.title;
    }
    if (campaignDescription && typeof adminSettings.campaign?.description === 'string') {
      campaignDescription.textContent = adminSettings.campaign.description;
    }
    if (cookieMessage && typeof adminSettings.cookies?.message === 'string') {
      cookieMessage.textContent = adminSettings.cookies.message;
    }
  }

  let campaignOpener = null;
  const FOCUSABLE_SELECTOR = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

  function openCampaign() {
    if (!campaignPopup) return;
    campaignOpener = document.activeElement;
    campaignPopup.classList.remove('hidden');
    const firstFocusable = Array.from(campaignPopup.querySelectorAll(FOCUSABLE_SELECTOR))
      .find(el => !el.disabled);
    firstFocusable?.focus();
  }

  function closeCampaign() {
    if (!campaignPopup) return;
    writeSafeStorage(storage, settings.storageKeys.campaignDismissedAt, new Date().toISOString());
    campaignPopup.classList.add('hidden');
    console.info(JSON.stringify({event:'campaign_popup_dismissed'}));
    campaignOpener?.focus();
    campaignOpener = null;
  }

  function trapFocus(e) {
    if (!campaignPopup || campaignPopup.classList.contains('hidden')) return;
    const focusable = Array.from(campaignPopup.querySelectorAll(FOCUSABLE_SELECTOR))
      .filter(el => !el.disabled);
    if (!focusable.length) return;
    const first = focusable[0];
    const last = focusable[focusable.length - 1];
    if (e.shiftKey) {
      if (document.activeElement === first) {
        e.preventDefault();
        last.focus();
      }
    } else {
      if (document.activeElement === last) {
        e.preventDefault();
        first.focus();
      }
    }
  }

  document.addEventListener('keydown', e => {
    if (campaignPopup && !campaignPopup.classList.contains('hidden')) {
      if (e.key === 'Escape') { closeCampaign(); }
      if (e.key === 'Tab') { trapFocus(e); }
    }
  });

  campaignClose?.addEventListener('click', closeCampaign);
  campaignLater?.addEventListener('click', closeCampaign);
  campaignBackdrop?.addEventListener('click', closeCampaign);

  cookieAccept?.addEventListener('click', () => {
    writeSafeStorage(storage, settings.storageKeys.cookieConsent, 'accepted');
    cookiePopup?.classList.add('hidden');
    console.info(JSON.stringify({event:'cookie_consent_accepted'}));
  });

  const adminSettings = await loadAdminSettings();
  applyDynamicContent(adminSettings);

  const campaignEnabled = adminSettings?.campaign?.enabled !== false;
  const campaignDeadlineIso = typeof adminSettings?.campaign?.deadlineIso === 'string'
    ? adminSettings.campaign.deadlineIso
    : settings.campaignDeadlineIso;
  const campaignCooldownDays = Number.isInteger(adminSettings?.campaign?.cooldownDays)
    ? adminSettings.campaign.cooldownDays
    : settings.campaignCooldownDays;

  const dismissedAt = readSafeStorage(storage, settings.storageKeys.campaignDismissedAt);
  if (
    campaignPopup
    && campaignEnabled
    && shouldShowCampaignPopup({
      now,
      dismissedAtIso: dismissedAt,
      deadlineIso: campaignDeadlineIso,
      cooldownDays: campaignCooldownDays
    })
  ) {
    openCampaign();
  }

  const consent = readSafeStorage(storage, settings.storageKeys.cookieConsent);
  if (cookiePopup && adminSettings?.cookies?.bannerEnabled !== false && !isCookieConsentAccepted(consent)) {
    cookiePopup.classList.remove('hidden');
  }
</script>

  <div id="siteFooter"></div>
  <script type="module" src="assets/js/main.js"></script>
</body>
</html>
